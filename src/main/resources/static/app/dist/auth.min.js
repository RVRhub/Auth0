var app=angular.module("auth",["auth0","ngStorage","angular-jwt"]).config(function(a){a.init({domain:"xaerozero.eu.auth0.com",clientID:"WIXPBPHwr9BYcOvERocaB6SQWznhJBdm",loginUrl:"/login"})}).config(function(a){a.interceptors.push("authInterceptor")}).run(function(a,b,c,d){b.hookEvents(),a.$on("$locationChangeStart",function(){var a=c.token;a&&(d.isTokenExpired(a)||b.isAuthenticated||b.authenticate(c.profile,a).then(function(a){console.log("Logged in via refresh token and got profile"),console.log(a)},function(a){}))})});app.controller("HomeController",["$scope","$location","auth","$localStorage","apiService"],function(a,b,c,d,e){function f(b){a.message=JSON.stringify(b,null,2),console.log(JSON.stringify(b))}a.message=null,a.signin=function(){c.signin({authParams:{scope:"openid profile"}},function(a,c,e,f,g){d.token=c,d.profile=a,b.path("/")},function(a){console.log("Error",a)})},a.signout=function(){delete d.token,delete d.profile},a.publicEndpoint=function(){e.getPublicEndpoint().success(function(a){f(a)}).error(function(a){f(a)})},a.adminEndpoint=function(){e.getAdminEndpoint().success(function(a){f(a)}).error(function(a){f(a)})},a.userEndpoint=function(){e.getUserEndpoint().success(function(a){f(a)}).error(function(a){f(a)})},a.clearMessage=function(){a.message=null}}),app.factory("authInterceptor",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},"undefined"!=typeof d.token&&(a.headers.Authorization="Bearer "+d.token),a}}}),app.service("apiService",["$http",function(a){this.getPublicEndpoint=function(){return a.get("/api/public")},this.getAdminEndpoint=function(){return a.get("/api/admin")},this.getUserEndpoint=function(){return a.get("/api/user")}}]);